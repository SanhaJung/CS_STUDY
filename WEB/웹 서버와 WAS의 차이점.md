

# 웹 서버

> 사전적 정의 
>
> "웹 브라우저 클라이언트로 부터 HTTP요청을 받아들이고 HTML문서와 같은 웹 페이지를 반환하느 컴퓨터 프로그램"

1. 클라이언트가 웹 브라우저에서 어떠한 페이지 요청을 하면 웹 서버에서 그 요청을 받아 **정적 컨텐츠를 제공하는 서버**
   (정적 컨텐츠란 **단순HTML문서, CSS, javascrip, 이미지, 파일 등 즉시 응답가능한 컨텐츠**)
   
2. 하지만 웹서버는 정적 컨텐츠만 제공하는 것은 아님
   **웹 서버가 동적 컨텐츠를 요청**받으면 **WAS에게 해당 요청을 넘겨**주고, WAS에서 처리한 **결과를 클라이언트에게 전달해주는 역할**도 한다.

3. 대표적인 웹서버: Apache, Nginx

   <img src="./images/웹서버와 WAS의 차이점/웹서버 작동방식.JPG" >

   

# WAS

> 사전적 정의
>
> "인터넷 상에서 **HTTP프로토콜**을 통해 사용자 컴퓨터나 장치에 **애플리케이션을 수행**해주는 미들웨어로서 **주로 동적 서버 컨텐츠를 수행**하는 것으로 웹 서버와 구별이 되며, 주로 **DB 서버와 같이 수행**"

### 1. WAS의 특징 

<img src="./images/웹서버와 WAS의 차이점/WAS.JPG" >

1. **WAS는 웹 서버와 웹 컨테이너가 합쳐진 행태**

   * 웹 서버의 기능을 갖고 있음  - > 웹서버를 설치하지 않고 WAS하나만으로 이용가능

   * WAS(ex. 톰캣)가 가지고 있는 웹서버가 충분한 성능 ->  웹서버(ex. Apache)를 설치하지 않아도사용할 수 있음

     * 그럼에도 웹서버를 WAS 앞단에 사용하는 이유

     ​	![웹서비스 구조](https://user-images.githubusercontent.com/76723430/145376030-36c79648-10da-40fd-b042-24eafed819e3.JPG)

     1) WAS가 해야할 일의 부담 줄이기

     2) WAS의 환경설정 파일을 외부에 노출 시키지 않도록함

     * 클라이언트와 연결하는 포트가 직접 WAS에 연결이 되어 있다면 중요 설정파일이 노출 될 수 있음.

     3) WAS를 무중단으로 운영

     * 대용량 웹어플리케이션의 경우 
       * WAS를 재부팅해야할 때 앞단의 웹서버에서 먼저 해당 WAS를 사용하지 못하도록하고 재부팅하면 사용자들은 문제가 발생한지 모른다.

2.  **웹 서버 단독으로 처리할 수 없는 "DB조회"나 다양한 로직 처리가 필요한 "동적 컨텐츠"를 제공 하여 사용자의 다양한 요구에 대응**

   * 동적컨텐츠: DB조회, 로직처리가 요구되는 컨텐츠

3.  **WAS는 JSP, Servlet구동환경을 제공하기 때문에 웹 컨테이너 혹은 서블릿 컨테이너라고도 불림**

### 2. 웹 컨테이너 

​	1. 정의

* 웹서버에서 JSP를 요청하면 웹 컨테이너에서 JSP -- > Servlet 변환 뒤 컴파일하고 이 결과를 웹서버에 전달
* Java 서블릿과 상호작용하는 WAS의 구성요소
* 서블릿의 생명주기 관리
* 멀티 스레딩 지원

2. 작동

   <img src="./images/웹서버와 WAS의 차이점/웹컨테이너작동.JPG" >

   1) 클라이언트는 웹서버로 요청(request)을 보냄

   2) WAS는 컨테이너로 요청 보냄

   3) 컨테이너가 요청을 각 서블릿에게 전달

   4) 서블릿 메서드가 로드

   5)서블릿은 컨테이너에 관련 응답을 줌

   6) 컨테이너는 이를 서버에 전달. 서버는 응답을 클라이언트에 전달



# Web Service Arichitecture

웹서비스의 아키택처 종류

* 클라이언트 - >   Web Server- > DB
* 클라이언트 - >  WAS - > DB
* 클라이언트 - > Web Server- > WAS - > DB



## Reference

https://velog.io/@pu1etproof/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%8A%A4%ED%84%B0%EB%94%94-2%EC%A3%BC%EC%B0%A8-%EC%9B%B9%EC%84%9C%EB%B2%84-WAS

https://codechasseur.tistory.com/25