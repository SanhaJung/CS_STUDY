# 브라우저 동작 방법

#### 브라우저란?

---

브라우저는 동기적으로 HTML, CSS, Javascript 언어를 해석하여 내용을 화면에 보여주는 응용 소프트웨어이다.

브라우저는 크롬, 인터넷 익스플로러, 네이버 웨일, 파이어폭스, 사파리 등 다양한 종류가 있다.

<br>

#### 브라우저 기본 구조

---

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-1.png">

<br>

##### 1.사용자 인터페이스

사용자가 접근할 수 있는 영역으로, 요청한 페이지를 보여주는 창을 제외한 주소 표시줄, 이전/다음 버튼, 북마크 메뉴, 새로 고침 버튼, 정지 버튼 , 홈 버튼 등의 부분을 의미한다.

##### 2.브라우저 엔진

사용자 인터페이스와 렌더링 엔진 사이의 동작을 제어한다. 
주로 자료 저장소를 참조하며 로컬에 데이터를 쓰고 읽으면서 다양한 작업을 한다. 

##### 3. 렌더링 엔진

웹 서버로부터 응답 받은 자원을 웹 브라우저 상에 나타내기 위해 렌더링 하는 역할을 한다.

##### 4. 통신

HTTP 요청과 같은 서버와 통신이 가능하게 하는 네트워크 호출에 사용된다. 
(플랫폼의 독립적인 인터페이스로 구성되어있음)

##### 5. UI 백엔드

콤보 박스와 창 같은 기본적인 장치를 그린다. 
(플랫폼에서 명시하지 않은 일반적인 인터페이스로서, OS 사용자 인터페이스 체계를 사용)

##### 6. 자바스크립트 해석기

자바스크립트 코드를 해석하고 실행한다.

##### 7. 자료 저장소

Cookie, Local Storage 등 브라우저 메모리를 활용하여 저장하는 영역이다.

<br>

#### ***렌더링이란?***

서버로부터 응답 받은 자원을 받아 브라우저에 뿌려주는 과정을 의미한다.

<br>

##### 렌더링 엔진 종류

크롬, 사파리 : 웹킷(Webkit) 엔진 사용

파이어폭스 : 게코(Gecko) 엔진 사용

<br>

**웹킷(Webkit)** : 최초 리눅스 플랫폼에 동작하기 위한 오픈소스 엔진
(애플이 맥과 윈도우에서 사파리 브라우저를 지원하기 위해 수정을 더했음)
**게코(Gecko)** : 모질라 재단에서 오픈소스로 개발되는 웹 브라우저 엔진
<br>
<br>

### 파싱(parsing)

---

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-6.png">

파싱(parsing)은 브라우저가 코드를 이해하고 사용할 수 있는 구조로 변환하는 것을 의미한다. 

파싱은 어휘 분석과 구문 분석으로 구분할 수 있는데, 어휘 분석은 자료를 토큰으로 분해하는 과정이다. 토큰은 유효하게 구성된 단위의 집합체로 용어집이라고도 할 수 있는데 인간의 언어로 말하자면 사전에 등장하는 모든 단어에 해당된다.

구문 분석은 언어의 구문 규칙을 적용하는 과정이다.

위의 과정을 통해먼저  파싱 트리(parsing tree)를 얻어낼 수 있다.
<br>

### 렌더링 동작 과정

---

<img src="https://d2.naver.com/content/images/2015/06/helloworld-59361-2.png">

<br>

```
1. 렌더링 엔진은 HTML 문서를 파싱해 DOM(Document Object Model) 트리로 변환하고, 
외부 CSS 파일과 함께 포함된 스타일 요소를 파싱해 CSSOM(CSS Object Model) 트리로 변환한다. 

2. 위에서 생성한 DOM 트리와 CSSOM 트리를 결합해 렌더 트리를 구축한다.

3. 렌더 트리 생성이 끝나면 배치가 시작되는데 이것은 각 노드를 화면의 정확한 위치에 표시하기 위해 크기나 위치등을 
계산하는 것을 의미한다.

4. 개별 노드를 화면에 표시한다. 

* 단, 렌더 트리 배치와 그리기 과정은 모든 HTML을 파싱할 때까지 기다리지 않고 네트워크로부터 나머지 내용이 
  전송되기를 기다리는 동시에 받은 내용의 일부를 먼저 화면에 표시한다.
```

<br>

***DOM과 CSSOM?***

웹 사이트를 브라우저 상에 표현할 때 서버로부터 받은 정보를 브라우저가 렌더링 엔진을 통해 파싱 하는데 이때 두 가지 요소를 파싱 하는데 하나는 HTML 또 하나는 CSS이다. 
이때 HTML을 파싱 하여 자료를 구조화한 것을 DOM (Document Object Model)이라 하고 CSS 내용을 파싱 하여 자료를 구조화한 것을 CSSOM (CSS Object Model)이라 한다.

<br>



### 요약

---

- 사용자가 url에 접속하면, 해당 서버에 요청이 전송된다.
- 렌더링 엔진은 html문서를 파싱해 DOM 트리를 구축하고, css파일을 파싱해 CSSOM 트리를 구축한다.
- 구축된 DOM트리와 CSSOM트리 2가지를 연결시켜 **렌더 트리**를 만든다.
- 화면에 배치하기 위해 각 노드들의 위치와 크기를 계산하고, UI 백엔드가 노드를 돌며 형상을 그린다.
- 렌더 트리 배치와 그리기 과정이 계속 진행됨과 동시에, 먼저 배치가 완료된 노드들을 화면에 표시한다.

<br>

### 예상 질문

---

📌 브라우저에서 렌더링의 동작 과정에 대해 설명해주세요.
> 위 내용 참고

📌 크롬과 파이어폭스에서 사용하는 렌더링 엔진은 각각 무엇인가요?
> 웹킷(Webkit)엔진과 게코(Gecko)엔진

<br>

<br>